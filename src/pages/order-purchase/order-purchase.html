<!--
  Generated template for the OrderPurchasePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>我的订单</ion-title>
  </ion-navbar>
  <ion-toolbar>
    <ion-segment [(ngModel)]="purchase" class="head-toolbar">
      <ion-segment-button value="all" (click)="getAll()">
        全部
      </ion-segment-button>
      <ion-segment-button value="waitConfirm" (click)="getWaitConfirm()">
        待确认
      </ion-segment-button>
      <ion-segment-button value="waitPay" (click)="getWaitPay()">
        待付款
      </ion-segment-button>
      <ion-segment-button value="waitReceive" (click)="getWaitReceive()">
        待收货
      </ion-segment-button>
      <ion-segment-button value="finished" (click)="getFinished()">
        已完成
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>

</ion-header>


<ion-content padding>
  <div [ngSwitch]="purchase">
    <ion-list *ngSwitchCase="'all'">
      <div *ngFor="let item of orders;let i = index">
          <div padding-top class="content-bgcolor">
              <div padding class="item-bgcolor">
                <ion-row justify-content-between align-items-center style="text-align: center;">
                    <div class="" style="text-align:center!important;">{{item.typename}}</div>
                    <div>{{item.statusname}}</div>
                </ion-row>
              </div>
            </div>
            <div padding-right padding-left class="item-border2">
                    <div *ngFor="let item2 of item.extData">
                        <ion-row justify-content-start align-items-center class="flex-nowrap border-b">
                            <div class="product-img"><img src="{{item2.images}}" alt=""></div>
                            <div class="product">
                              <div class="product-title">{{item2.name}}</div>
                              <div class="product-attr" *ngIf="item2.color">{{item2.color}}</div>
                              <div justify-content-between class="list-price">
                                  <span class="price-new">预算金额：<i>{{coin}}</i>{{item2.budget}}</span>
                                  <div><ion-icon class="close-font" name="md-close"></ion-icon>{{item2.amount}}</div>
                              </div>
                            </div>
                        </ion-row>
                    </div>
                    <ion-row justify-content-end class="border-b foot-fee" *ngIf="item.status > 1">
                        <div>共<span class="color6">{{item.amount}}</span>件，</div>
                        <div *ngIf="item.trafficeprice > 0"><div class="color9">运费：<i>{{coin}}</i>{{item.trafficeprice}}，</div></div>
                        <!-- <div *ngIf="item.purcharseprice > 0"><div class="color9">服务费：<i>{{coin}}</i>{{item.purcharseprice}}，</div></div> -->
                        <div>总金额：<span class="color6"><i>{{coin}}</i><span class="total-font">{{item.sumprice}}</span></span></div>
                      </ion-row>
                    <ion-row justify-content-end *ngIf="item.status == 1">
                      <div class="cancel-btn" (click)="cancelOrder(item.id)">取消订单</div>
                    </ion-row>
                    <ion-row justify-content-end *ngIf="item.status == 2">
                      <div class="cancel-btn" (click)="cancelOrder(item.id)">取消订单</div>
                      <div class="pay-btn">立即支付</div>
                    </ion-row>
                    <ion-row justify-content-end *ngIf="item.status == 7">
                        <div class="cancel-btn" (click)="transInfo(item.id)">物流信息</div>
                        <div class="pay-btn" (click)="confirmReceive(item.id)">确认收货</div>
                    </ion-row>
                    <ion-row justify-content-end *ngIf="item.status == 8">
                        <div class="cancel-btn" (click)="deleteOrder(item.id)">删除订单</div>
                        <div class="pay-btn">评论</div>
                    </ion-row>
                    <ion-row justify-content-end *ngIf="item.status == 9">
                        <div class="cancel-btn" (click)="deleteOrder(item.id)">删除订单</div>
                    </ion-row>
              </div>
      </div> 
    </ion-list>
  
    <ion-list *ngSwitchCase="'waitConfirm'">
      <div *ngFor="let item of orders;let i = index">
          <div padding-top class="content-bgcolor">
              <div padding class="item-bgcolor">
                <ion-row justify-content-between align-items-center style="text-align: center;">
                    <div class="" style="text-align:center!important;">{{item.typename}}</div>
                    <div>{{item.statusname}}</div>
                </ion-row>
              </div>
            </div>
            <div padding-right padding-left class="item-border2">
                    <div *ngFor="let item2 of item.extData">
                        <ion-row justify-content-start align-items-center class="flex-nowrap border-b">
                            <div class="product-img"><img src="{{item2.images}}" alt=""></div>
                            <div class="product">
                              <div class="product-title">{{item2.name}}</div>
                              <div class="product-attr" *ngIf="item2.color">{{item2.color}}</div>
                              <div justify-content-between class="list-price">
                                  <span class="price-new">预算金额：<i>{{coin}}</i>{{item2.budget}}</span>
                                  <div><ion-icon class="close-font" name="md-close"></ion-icon>{{item2.amount}}</div>
                              </div>
                            </div>
                        </ion-row>
                    </div>
                    <ion-row justify-content-end class="border-b foot-fee" *ngIf="item.status > 1">
                        <div>共<span class="color6">{{item.amount}}</span>件，</div>
                        <div *ngIf="item.trafficeprice > 0"><div class="color9">运费：<i>{{coin}}</i>{{item.trafficeprice}}，</div></div>
                        <!-- <div *ngIf="item.purcharseprice > 0"><div class="color9">服务费：<i>{{coin}}</i>{{item.purcharseprice}}，</div></div> -->
                        <div>总金额：<span class="color6"><i>{{coin}}</i><span class="total-font">{{item.sumprice}}</span></span></div>
                      </ion-row>
                      <ion-row justify-content-end *ngIf="item.status == 1">
                          <div class="cancel-btn" (click)="cancelOrder(item.id)">取消订单</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 2">
                          <div class="cancel-btn" (click)="cancelOrder(item.id)">取消订单</div>
                          <div class="pay-btn">立即支付</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 7">
                            <div class="cancel-btn" (click)="transInfo(item.id)">物流信息</div>
                            <div class="pay-btn" (click)="confirmReceive(item.id)">确认收货</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 8">
                            <div class="cancel-btn" (click)="deleteOrder(item.id)">删除订单</div>
                            <div class="pay-btn">评论</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 9">
                            <div class="cancel-btn" (click)="deleteOrder(item.id)">删除订单</div>
                        </ion-row>
              </div>
      </div>
    </ion-list>

    <ion-list *ngSwitchCase="'waitPay'">
      <div *ngFor="let item of orders;let i = index">
          <div padding-top class="content-bgcolor">
              <div padding class="item-bgcolor">
                <ion-row justify-content-between align-items-center style="text-align: center;">
                    <div class="" style="text-align:center!important;">{{item.typename}}</div>
                    <div>{{item.statusname}}</div>
                </ion-row>
              </div>
            </div>
            <div padding-right padding-left class="item-border2">
                    <div *ngFor="let item2 of item.extData">
                        <ion-row justify-content-start align-items-center class="flex-nowrap border-b">
                            <div class="product-img"><img src="{{item2.images}}" alt=""></div>
                            <div class="product">
                              <div class="product-title">{{item2.name}}</div>
                              <div class="product-attr" *ngIf="item2.color">{{item2.color}}</div>
                              <div justify-content-between class="list-price">
                                  <span class="price-new">预算金额：<i>{{coin}}</i>{{item2.budget}}</span>
                                  <div><ion-icon class="close-font" name="md-close"></ion-icon>{{item2.amount}}</div>
                              </div>
                            </div>
                        </ion-row>
                    </div>
                    <ion-row justify-content-end class="border-b foot-fee" *ngIf="item.status > 1">
                        <div>共<span class="color6">{{item.amount}}</span>件，</div>
                        <div *ngIf="item.trafficeprice > 0"><div class="color9">运费：<i>{{coin}}</i>{{item.trafficeprice}}，</div></div>
                        <!-- <div *ngIf="item.purcharseprice > 0"><div class="color9">服务费：<i>{{coin}}</i>{{item.purcharseprice}}，</div></div> -->
                        <div>总金额：<span class="color6"><i>{{coin}}</i><span class="total-font">{{item.sumprice}}</span></span></div>
                      </ion-row>
                      <ion-row justify-content-end *ngIf="item.status == 1">
                          <div class="cancel-btn" (click)="cancelOrder(item.id)">取消订单</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 2">
                          <div class="cancel-btn" (click)="cancelOrder(item.id)">取消订单</div>
                          <div class="pay-btn">立即支付</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 7">
                            <div class="cancel-btn" (click)="transInfo(item.id)">物流信息</div>
                            <div class="pay-btn" (click)="confirmReceive(item.id)">确认收货</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 8">
                            <div class="cancel-btn" (click)="deleteOrder(item.id)">删除订单</div>
                            <div class="pay-btn">评论</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 9">
                            <div class="cancel-btn" (click)="deleteOrder(item.id)">删除订单</div>
                        </ion-row>
              </div>
      </div>
    </ion-list>

    <ion-list *ngSwitchCase="'waitReceive'">
      <div *ngFor="let item of orders;let i = index">
          <div padding-top class="content-bgcolor">
              <div padding class="item-bgcolor">
                <ion-row justify-content-between align-items-center style="text-align: center;">
                    <div class="" style="text-align:center!important;">{{item.typename}}</div>
                    <div>{{item.statusname}}</div>
                </ion-row>
              </div>
            </div>
            <div padding-right padding-left class="item-border2">
                    <div *ngFor="let item2 of item.extData">
                        <ion-row justify-content-start align-items-center class="flex-nowrap border-b">
                            <div class="product-img"><img src="{{item2.images}}" alt=""></div>
                            <div class="product">
                              <div class="product-title">{{item2.name}}</div>
                              <div class="product-attr" *ngIf="item2.color">{{item2.color}}</div>
                              <div justify-content-between class="list-price">
                                  <span class="price-new">预算金额：<i>{{coin}}</i>{{item2.budget}}</span>
                                  <div><ion-icon class="close-font" name="md-close"></ion-icon>{{item2.amount}}</div>
                              </div>
                            </div>
                        </ion-row>
                    </div>
                    <ion-row justify-content-end class="border-b foot-fee" *ngIf="item.status > 1">
                        <div>共<span class="color6">{{item.amount}}</span>件，</div>
                        <div *ngIf="item.trafficeprice > 0"><div class="color9">运费：<i>{{coin}}</i>{{item.trafficeprice}}，</div></div>
                        <!-- <div *ngIf="item.purcharseprice > 0"><div class="color9">服务费：<i>{{coin}}</i>{{item.purcharseprice}}，</div></div> -->
                        <div>总金额：<span class="color6"><i>{{coin}}</i><span class="total-font">{{item.sumprice}}</span></span></div>
                      </ion-row>
                      <ion-row justify-content-end *ngIf="item.status == 1">
                          <div class="cancel-btn" (click)="cancelOrder(item.id)">取消订单</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 2">
                          <div class="cancel-btn" (click)="cancelOrder(item.id)">取消订单</div>
                          <div class="pay-btn">立即支付</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 7">
                            <div class="cancel-btn" (click)="transInfo(item.id)">物流信息</div>
                            <div class="pay-btn" (click)="confirmReceive(item.id)">确认收货</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 8">
                            <div class="cancel-btn" (click)="deleteOrder(item.id)">删除订单</div>
                            <div class="pay-btn">评论</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 9">
                            <div class="cancel-btn" (click)="deleteOrder(item.id)">删除订单</div>
                        </ion-row>
              </div>
      </div>
    </ion-list>

    <ion-list *ngSwitchCase="'finished'">
      <div *ngFor="let item of orders;let i = index">
          <div padding-top class="content-bgcolor">
              <div padding class="item-bgcolor">
                <ion-row justify-content-between align-items-center style="text-align: center;">
                    <div class="" style="text-align:center!important;">{{item.typename}}</div>
                    <div>{{item.statusname}}</div>
                </ion-row>
              </div>
            </div>
            <div padding-right padding-left class="item-border2">
                    <div *ngFor="let item2 of item.extData">
                        <ion-row justify-content-start align-items-center class="flex-nowrap border-b">
                            <div class="product-img"><img src="{{item2.images}}" alt=""></div>
                            <div class="product">
                              <div class="product-title">{{item2.name}}</div>
                              <div class="product-attr" *ngIf="item2.color">{{item2.color}}</div>
                              <div justify-content-between class="list-price">
                                  <span class="price-new">预算金额：<i>{{coin}}</i>{{item2.budget}}</span>
                                  <div><ion-icon class="close-font" name="md-close"></ion-icon>{{item2.amount}}</div>
                              </div>
                            </div>
                        </ion-row>
                    </div>
                    <ion-row justify-content-end class="border-b foot-fee" *ngIf="item.status > 1">
                        <div>共<span class="color6">{{item.amount}}</span>件，</div>
                        <div *ngIf="item.trafficeprice > 0"><div class="color9">运费：<i>{{coin}}</i>{{item.trafficeprice}}，</div></div>
                        <!-- <div *ngIf="item.purcharseprice > 0"><div class="color9">服务费：<i>{{coin}}</i>{{item.purcharseprice}}，</div></div> -->
                        <div>总金额：<span class="color6"><i>{{coin}}</i><span class="total-font">{{item.sumprice}}</span></span></div>
                      </ion-row>
                      <ion-row justify-content-end *ngIf="item.status == 1">
                          <div class="cancel-btn" (click)="cancelOrder(item.id)">取消订单</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 2">
                          <div class="cancel-btn" (click)="cancelOrder(item.id)">取消订单</div>
                          <div class="pay-btn">立即支付</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 7">
                            <div class="cancel-btn" (click)="transInfo(item.id)">物流信息</div>
                            <div class="pay-btn" (click)="confirmReceive(item.id)">确认收货</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 8">
                            <div class="cancel-btn" (click)="deleteOrder(item.id)">删除订单</div>
                            <div class="pay-btn">评论</div>
                        </ion-row>
                        <ion-row justify-content-end *ngIf="item.status == 9">
                            <div class="cancel-btn" (click)="deleteOrder(item.id)">删除订单</div>
                        </ion-row>
              </div>
      </div>
    </ion-list>

    </div>
</ion-content>
